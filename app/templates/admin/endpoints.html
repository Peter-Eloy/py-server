{% extends "base.html" %}

{% block title %}{{ project.name }} - Endpoints{% endblock %}

{% block content %}
<a href="{{ url_for('admin.index') }}" class="back-link">‚Üê Back to Projects</a>

<h1>{{ project.name }}</h1>
<p>{{ project.description }}</p>

<a href="{{ url_for('admin.new_endpoint', project_id=project.id) }}" class="btn">+ New Endpoint</a>

<table>
    <thead>
        <tr>
            <th>Method</th>
            <th>Path</th>
            <th>Type</th>
            <th>Response</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for endpoint in project.endpoints %}
        <tr>
            <td><strong>{{ endpoint.method }}</strong></td>
            <td><code>/api/{{ project.name }}{{ endpoint.path }}</code></td>
            <td>{{ endpoint.response_type }}</td>
            <td>
                {% if endpoint.response_type == 'file' %}
                    üìÑ {{ endpoint.file_path }}
                {% else %}
                    üìã JSON
                {% endif %}
            </td>
            <td>
                <form method="POST" action="{{ url_for('admin.delete_endpoint', endpoint_id=endpoint.id) }}" style="display: inline;">
                    <button type="submit" class="btn btn-danger" onclick="return confirm('Delete this endpoint?')">Delete</button>
                </form>
            </td>
        </tr>
        {% else %}
        <tr>
            <td colspan="5" style="text-align: center; padding: 40px;">No endpoints yet. Create one!</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}